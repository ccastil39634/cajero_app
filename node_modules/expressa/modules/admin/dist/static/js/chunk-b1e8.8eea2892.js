(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b1e8"],{EEGE:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.count>t.pageSize?n("el-pagination",{attrs:{"page-size":t.pageSize,total:t.count,"current-page":t.page,layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.page=e},"current-change":function(e){t.update()}}}):t._e(),t._v(" "),n("el-table",{attrs:{data:t.data,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},t._l(t.listedProperties,(function(e,o){return n("el-table-column",{key:e,attrs:{label:e,align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){return[0===o&&"requestlog"!==t.collectionName?n("router-link",{attrs:{to:"/edit/"+t.collectionName+"/"+r.row._id}},[t._v("\n          "+t._s(t.getPath(r.row,e))+"\n        ")]):t._e(),t._v(" "),0===o&&"requestlog"===t.collectionName?n("router-link",{attrs:{to:"/dev/viewrequest/"+r.row._id}},[t._v("\n          "+t._s(t.getPath(r.row,e))+"\n        ")]):t._e(),t._v(" "),0!==o?n("span",[t._v(t._s(t.getPath(r.row,e)))]):t._e()]}}])})}))),t._v(" "),t.count>t.pageSize&&t.showPaginateOnBottom?n("el-pagination",{attrs:{"page-size":t.pageSize,total:t.count,"current-page":t.page,layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.page=e},"current-change":function(e){t.update()}}}):t._e(),t._v(" "),t.showAddButton?n("router-link",{attrs:{to:"/edit/"+t.collectionName+"/create"}},[n("button",{staticClass:"btn btn-primary"},[t._v("\n      Add\n    ")])]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary download-button",on:{click:function(e){t.downloadCSV()}}},[t._v("\n    Download All\n  ")])],1)},r=[]},GQeE:function(t,e,n){t.exports={default:n("iq4v"),__esModule:!0}},Iab2:function(t,e,n){(function(n){var o,r,i;r=[],void 0===(i="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){u(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,n,a){var u=i.URL||i.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?r(c):o(c.href)?e(t,n,a):r(c,c.target="_blank")):(c.href=u.createObjectURL(t),setTimeout((function(){u.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),n);else if(o(t))e(t,n,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var u="application/octet-stream"===t.type,c=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||u&&c||a)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},s.readAsDataURL(t)}else{var f=i.URL||i.webkitURL,p=f.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout((function(){f.revokeObjectURL(p)}),4e4)}});i.saveAs=u.saveAs=u,t.exports=u})?o.apply(e,r):o)||(t.exports=i)}).call(this,n("yLpj"))},Mqbl:function(t,e,n){var o=n("JB68"),r=n("w6GO");n("zn7N")("keys",(function(){return function(t){return r(o(t))}}))},VqTb:function(t,e,n){"use strict";n.r(e);var o=n("EEGE"),r=n("sw1Y");for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("alPm");var a=n("KHd+"),u=Object(a.a)(r.default,o.a,o.b,!1,null,"4b9ea8f1",null);u.options.__file="ListDocuments2.vue",e.default=u.exports},alPm:function(t,e,n){"use strict";var o=n("rC4C");n.n(o).a},boci:function(t,e,n){var o,r,i;!function(n,a){"use strict";"object"==typeof t.exports?t.exports=a():(r=[],void 0===(i="function"==typeof(o=a)?o.apply(e,r):o)||(t.exports=i))}(0,(function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(r(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(e(t,n))return!1;return!0}return!1}function o(e){return t.call(e)}var r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(t){var e=parseInt(t);return e.toString()===t?e:t}function a(t){var a,u=function(t){return Object.keys(u).reduce((function(e,n){return"create"===n||"function"==typeof u[n]&&(e[n]=u[n].bind(u,t)),e}),{})};function c(t,e){if(a(t,e))return t[e]}function l(e,n,o,r){if("number"==typeof n&&(n=[n]),!n||0===n.length)return e;if("string"==typeof n)return l(e,n.split(".").map(i),o,r);var a=n[0],u=c(e,a);if(t.includeInheritedProps&&("__proto__"===a||"constructor"===a&&"function"==typeof u))throw new Error("For security reasons, object's magic properties cannot be set");return 1===n.length?(void 0!==u&&r||(e[a]=o),u):(void 0===u&&("number"==typeof n[1]?e[a]=[]:e[a]={}),l(e[a],n.slice(1),o,r))}return a=(t=t||{}).includeInheritedProps?function(){return!0}:function(t,n){return"number"==typeof n&&Array.isArray(t)||e(t,n)},u.has=function(n,o){if("number"==typeof o?o=[o]:"string"==typeof o&&(o=o.split(".")),!o||0===o.length)return!!n;for(var a=0;a<o.length;a++){var u=i(o[a]);if(!("number"==typeof u&&r(n)&&u<n.length||(t.includeInheritedProps?u in Object(n):e(n,u))))return!1;n=n[u]}return!0},u.ensureExists=function(t,e,n){return l(t,e,n,!0)},u.set=function(t,e,n,o){return l(t,e,n,o)},u.insert=function(t,e,n,o){var i=u.get(t,e);o=~~o,r(i)||(i=[],u.set(t,e,i)),i.splice(o,0,n)},u.empty=function(t,e){var i,c;if(!n(e)&&(null!=t&&(i=u.get(t,e)))){if("string"==typeof i)return u.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===o(t)}(i))return u.set(t,e,!1);if("number"==typeof i)return u.set(t,e,0);if(r(i))i.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===o(t)}(i))return u.set(t,e,null);for(c in i)a(i,c)&&delete i[c]}}},u.push=function(t,e){var n=u.get(t,e);r(n)||(n=[],u.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},u.coalesce=function(t,e,n){for(var o,r=0,i=e.length;r<i;r++)if(void 0!==(o=u.get(t,e[r])))return o;return n},u.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return u.get(t,e.split("."),n);var o=i(e[0]),r=c(t,o);return void 0===r?n:1===e.length?r:u.get(t[o],e.slice(1),n)},u.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(n(e))return t;if("string"==typeof e)return u.del(t,e.split("."));var o=i(e[0]);return a(t,o)?1!==e.length?u.del(t[o],e.slice(1)):(r(t)?t.splice(o,1):delete t[o],t):t},u}var u=a();return u.create=a,u.withInheritedProps=a({includeInheritedProps:!0}),u}))},iq4v:function(t,e,n){n("Mqbl"),t.exports=n("WEpk").Object.keys},rC4C:function(t,e,n){},sw1Y:function(t,e,n){"use strict";n.r(e);var o=n("vRIL"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e.default=r.a},vRIL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n("14Xm")),r=s(n("GQeE")),i=s(n("QbLZ")),a=s(n("D3Ub")),u=s(n("t3Un")),c=s(n("Iab2")),l=s(n("boci"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ListDocuments",props:{collectionName:{type:String,default:"collection"},filter:{type:Object,default:function(){}},columns:{type:Array,default:function(){}},showAddButton:{type:Boolean,default:!0},showPaginateOnBottom:{type:Boolean,default:!0}},data:function(){return{start:0,page:1,pageSize:25,count:0,data:[],schema:{},listedProperties:[]}},watch:{collectionName:{handler:"update"}},mounted:function(){this.update()},methods:{getPath:function(t,e,n){var o=String.prototype.split.call(e,/[,[\].]+?/).filter(Boolean).reduce((function(t,e){return null!=t?t[e]:t}),t);return void 0===o||o===t?n:o},update:function(){var t=this;return(0,a.default)(o.default.mark((function e(){var n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$route.params.collectionName&&(t.collectionName=t.$route.params.collectionName),n=(0,i.default)({page:t.page,limit:t.pageSize,orderby:'{"meta.created":-1}'},t.filter),e.next=4,(0,u.default)({url:"/"+t.collectionName+"/",params:n});case 4:if(a=e.sent.data,t.count=a.itemsTotal,t.data=a.data,t.collection&&t.collection._id===t.collectionName){e.next=12;break}return e.next=10,(0,u.default)({url:"/collection/"+t.collectionName});case 10:t.collection=e.sent.data,t.schema=t.collection.schema;case 12:t.listedProperties=t.columns||t.collection.admin&&t.collection.admin.columns||(0,r.default)(t.schema.properties);case 13:case"end":return e.stop()}}),e,t)})))()},downloadCSV:function(){var t=this,e=this.collectionName,n=this.listedProperties.map((function(t){return'"'+t+'"'})).join(",")+"\n";if(this.data){n+=this.data.map((function(e){return t.listedProperties.map((function(t){return'"'+String(l.default.get(e,t)||"").replace(/"/g,'""')+'"'}))})).join("\n"),console.log(n);var o=new Blob([n],{type:"text/plain;charset=utf-8"});(0,c.default)(o,e+".csv")}}}}},zn7N:function(t,e,n){var o=n("Y7ZC"),r=n("WEpk"),i=n("KUxP");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),o(o.S+o.F*i((function(){n(1)})),"Object",a)}}}]);